local Library = {}

function Library:CreateWindow(title)
    local window = Instance.new("ScreenGui")
    local frame = Instance.new("Frame", window)
    frame.Size = UDim2.new(0.3, 0, 0.5, 0)
    frame.Position = UDim2.new(0.35, 0, 0.25, 0)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

    local titleLabel = Instance.new("TextLabel", frame)
    titleLabel.Size = UDim2.new(1, 0, 0.1, 0)
    titleLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)

    return {
        Frame = frame,
        CreateFolder = function(self, folderName)
            local folderFrame = Instance.new("Frame", frame)
            folderFrame.Size = UDim2.new(1, 0, 0.4, 0)
            folderFrame.Position = UDim2.new(0, 0, 0.1, 0)
            folderFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

            local folderLabel = Instance.new("TextLabel", folderFrame)
            folderLabel.Size = UDim2.new(1, 0, 0.1, 0)
            folderLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            folderLabel.Text = folderName
            folderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)

            return {
                Button = function(self, buttonLabel, callback)
                    local button = Instance.new("TextButton", folderFrame)
                    button.Size = UDim2.new(0.9, 0, 0.2, 0)
                    button.Position = UDim2.new(0.05, 0, 0.2 + (self:GetButtonCount() * 0.25), 0)
                    button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
                    button.Text = buttonLabel
                    button.TextColor3 = Color3.fromRGB(255, 255, 255)

                    button.MouseButton1Click:Connect(callback)

                    return self
                end,

                GetButtonCount = function(self)
                    return #folderFrame:GetChildren() - 1 -- Exclude the folderLabel
                end
            }
        end
    }
end

local w = Library:CreateWindow("UGCðŸ˜ˆSCRIPT")

local b = w:CreateFolder("RECOLECTAR")
local e = w:CreateFolder("TERMINAR")

local teleporting = false
local teleportObjectName = nil

local function teleportToObject(objectName)
    local object = game.Workspace:FindFirstChild(objectName)
    if object then
        game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(object.CFrame)
    else
        warn("Objeto no encontrado: " .. objectName)
    end
end

local function toggleTeleporting(objectName)
    teleportObjectName = objectName
    teleporting = not teleporting

    if teleporting then
        while teleporting do
            teleportToObject(teleportObjectName)
            wait(0.5)
        end
    end
end

b:Button("INICIAR", function()
    local objectNames = {"robot"}
    for _, objectName in ipairs(objectNames) do
        toggleTeleporting(objectName)
    end
    
    game:GetService("StarterGui"):SetCore("SendNotification", { 
        Title = "TELETRANSPORTE ACTIVADO",
        Text = "Iniciando teletransporte continuo para el objeto robot.",
        Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"
    })
end)

e:Button("INICIAR", function()
    local player = game:GetService("Players").LocalPlayer
    local destination = game.Workspace:FindFirstChild("WithdrawalZone") 

    if destination then
        player.Character:SetPrimaryPartCFrame(destination.CFrame)
        game:GetService("StarterGui"):SetCore("SendNotification", { 
            Title = "TELETRANSPORTADO",
            Text = "Has sido teletransportado a la ubicaciÃ³n deseada.",
            Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"
        })
    else
        game:GetService("StarterGui"):SetCore("SendNotification", { 
            Title = "ERROR",
            Text = "No se encontrÃ³ el destino.",
            Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"
        })
    end
end)
